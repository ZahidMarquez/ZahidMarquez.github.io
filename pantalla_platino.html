<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Pantalla Platino</title>

<style>
body{
  margin:0;
  font-family:Segoe UI,sans-serif;
  background:#2d2a55;
  color:#fff;
  text-align:center;
}
h1{font-size:50px;margin:20px 0;}
#proximoTurno{font-size:120px;font-weight:bold;}
#nombre{font-size:50px;}
#mostrador{font-size:40px;}

.listaTurnos{
  margin-top:40px;
  display:flex;
  justify-content:center;
  gap:20px;
}
.turnoCard{
  background:#1f1f1f;
  padding:20px;
  border-radius:10px;
  width:200px;
}
.Platino{border-left:8px solid silver;}
</style>
</head>

<body>
<h1>âœˆ PLATINO</h1>
<div id="proximoTurno">0</div>
<div id="nombre">---</div>
<div id="mostrador">---</div>
<div class="listaTurnos" id="lista"></div>

<script>
function limpiarPantalla(){
  proximoTurno.innerText="0";
  nombre.innerText="---";
  mostrador.innerText="---";
  lista.innerHTML="";
}

function actualizar(){
  const limpiar = localStorage.getItem("limpiarPublico");
  if(limpiar){
    limpiarPantalla();
    localStorage.removeItem("limpiarPublico");
  }

  const ultimo = JSON.parse(localStorage.getItem("ultimoLlamado"));
  const espera = (JSON.parse(localStorage.getItem("espera")) || [])
    .filter(p => p.mostrador==="Platino");

  if(ultimo && ultimo.mostrador==="Platino"){
    proximoTurno.innerText = ultimo.turno;
    nombre.innerText = ultimo.nombre;
    mostrador.innerText = ultimo.mostrador;
  }

  lista.innerHTML="";
  espera.slice(0,5).forEach(p=>{
    lista.innerHTML+=`
      <div class="turnoCard Platino">
        <b>#${p.turno}</b><br>${p.nombre}
      </div>`;
  });
}

setInterval(actualizar,1000);
actualizar();
</script>
</body>
</html>
